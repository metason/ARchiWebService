<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      color: black;
      font-family: sans-serif;
      font-size: 85%;
      width: 100%;
    }

    table,
    td,
    th {
      border: 1px solid #bbb;
      text-align: left;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th,
    td {
      padding: 15px;
    }

    .topheader {
      width: 100%;
      display: flex;
      align-items: center;
      padding: 10px;
      text-align: center;
      background: #EFEEF1;
      color: black;
      font-size: 32px;
    }

    .row {
      display: flex;
    }

    .column {
      flex: 50%;
    }
  </style>
  <title>Damage Claim</title>
</head>

<body>
  <div class="topheader">
    <a href="http://www.verifiedspaces.com">
      <img src="https://www.verifiedspaces.com/extension/verifiedspaces/vslogo.png" width="60" />
    </a>
    &nbsp;Verified Spaces
  </div>
  <h1>Claim Report</h1>
  This document is an example of a damage claim report generated by a workflow using data captured by the ARchi VR app.
  This functionality can easily be integrated into existing IT solutions of insurance companies using standard Web
  technologies. For more information please visit the web page of <a href="http://www.verifiedspaces.com">Verified
    Spaces</a>.
  <h1>Damaged Room</h1>
  Ref. No.: {{ space['id'] }}<br>
  Address: {{ space['location']['place'] }}, {{ space['location']['city'] }} <br>
  Location: see <a
    href="https://maps.apple.com?ll={{ space['location']['latitude'] }},{{ space['location']['longitude'] }}">map</a><br>
  <div class="row">
    <div class="column">
      <h2>Room Info</h2>
      Name: {{ space['name'] }}<br>
      {% if space['building'] %}
      Building: {{ space['building'] }}<br>
      {% endif %}
      Level: {{ space['level'] }}<br>
      #Walls: {{ space['walls'] | count }} <br>
      #Doors: {{ space['cutouts'] | selectattr("type", "equalto", "Door") | list | count }} <br>
      #Windows: {{ space['cutouts'] | selectattr("type", "equalto", "Window") | list | count }} <br>
    </div>
    <div class="column">
      <h2>Damage</h2>
      Reported by: {{ space['creator']['user'] }}<br>
      using ARchi VR app on {{ space['creator']['device'] }}<br>
      Date: {{ space['creator']['date'] }}<br>
      {% for item in space['items'] %}
      {% if item['subtype'] == 'Damaged Area' %}
      Damage reason: {{ item['name'] }} <br>
      Damage area: {{ item['assetMeta'][5:] }} m<sup>2</sup><br>
      {% endif %}
      {% endfor %}
      Floor material: {{ space['floors'][0]['material'] }}<br>
    </div>
  </div>
  <h2>Spatial Data</h2>
  <table border="1">
    <tr>
      <th>Floor</th>
      <th>Height</th>
      <th>Cubature</th>
      <th>Walls</th>
    </tr>
    {% for floor in space['floors'] %}
    <tr>
      <td>
        {{ "%.2f"|format(floor['area']) }} m<sup>2</sup>
      </td>
      <td>
        {{ "%.2f"|format(floor['ceilingHeight']) }} m
      </td>
      <td>
        {{ "%.2f"|format(floor['area'] * floor['ceilingHeight']) }} m<sup>3</sup>
      </td>
      <td>
        {{ "%.2f"|format(floor['wallArea']) }} m<sup>2</sup>
      </td>
    </tr>
    {% endfor %}
  </table>

  <h2>Floor Plan</h2>
  <img src="{{ refs['svg'] }}" />

  {% if refs['photo1'] %}
  <h2>Photos</h2>
  <div style="display: flex;flex-flow: row wrap;">
    <figure>
      <img src="{{ refs['photo1'] }}" width="400" />
      <figcaption>Photo 1</figcaption>
    </figure>
    {% endif %}

    {% if refs['photo2'] %}
    <figure>
      <img src="{{ refs['photo2'] }}" width="400" />
      <figcaption>Photo 2</figcaption>
    </figure>
    {% endif %}

    {% if refs['photo1'] %}
  </div>
  {% endif %}
  <h2>3D Model</h2>
  View space as Web-based <a href="{{ refs['web3D'] }}">3D model</a>.
  <br><br>
  <hr>
</body>

</html>